jQuery(document).ready(function($) {
    // Hide the page loader on page load
    $("#page-loader").fadeOut(500);

    // Show the loader when a link is clicked (except for certain cases)
    $("a").on("click", function(e) {
        if (
            $(this).attr("target") !== "_blank" &&
            $(this).attr("href") !== "#" &&
            $(this).attr("href").indexOf("mailto:") === -1 &&
            !$(this).closest('.mobile-submenu').length
        ) {
            $("#page-loader").fadeIn(300);
        }
    });

    // Fix the issue for the back/forward navigation
    $(window).on('pageshow pagehide', function(event) {
        if (event.type === 'pageshow') {
            $("#page-loader").fadeOut(500);
        } else if (event.type === 'pagehide') {
            $("#page-loader").fadeIn(300);
        }
    });

    // ğŸ” Language selector
    const langSelect = document.getElementById('language-select');
    if (langSelect) {
        langSelect.addEventListener('change', function () {
            const selectedLang = this.value;
            document.cookie = "site_lang=" + selectedLang + "; path=/; max-age=" + (60 * 60 * 24 * 30) + "; SameSite=Lax";
            window.location.href = window.location.pathname; // full reload
        });
    }
});

// ğŸ” Toggle mobile submenu
document.querySelectorAll('.mobile-submenu > a').forEach(item => {
    item.addEventListener('click', function(e) {
        const submenu = this.parentElement;
        submenu.classList.toggle('active');
        e.preventDefault();
    });
});

// ğŸ” Toggle main mobile menu
function toggleMenu() {
    const modal = document.getElementById('modal-menu');
    modal.classList.toggle('active');
}
