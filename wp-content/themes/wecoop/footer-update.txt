ISTRUZIONI PER AGGIORNARE IL FOOTER.PHP SUL SERVER FTP:

Sostituisci lo script del language-switcher (righe 32-37 circa) con questo:

            <script>
            document.getElementById('language-select').addEventListener('change', function () {
                const selectedLang = this.value;
                
                // Salva il cookie
                document.cookie = "site_lang=" + selectedLang + ";path=/;max-age=" + (60 * 60 * 24 * 30);
                
                // Invia richiesta AJAX per salvare nel profilo utente
                fetch('<?php echo admin_url('admin-ajax.php'); ?>', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: 'action=save_language&lang=' + selectedLang
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Lingua salvata:', data);
                    location.reload();
                })
                .catch(error => {
                    console.error('Errore salvataggio lingua:', error);
                    location.reload(); // Ricarica comunque
                });
            });
            </script>

COSA FA:
1. Salva il cookie come prima (per il sito web)
2. Chiama l'endpoint AJAX per salvare nel profilo utente (per le email)
3. Se l'utente Ã¨ loggato, aggiorna preferred_language nel database
4. Le email future useranno questa lingua salvata
